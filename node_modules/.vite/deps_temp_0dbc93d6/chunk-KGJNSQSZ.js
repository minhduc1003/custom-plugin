import {
  c
} from "./chunk-A3UAJ3XR.js";
import {
  $11,
  CB1,
  GK1,
  H3,
  HQe,
  M2,
  N,
  QU1,
  RQe,
  SQe,
  T2,
  TQe,
  X6n,
  _,
  ao,
  at1,
  b0,
  bB1,
  cQe,
  ca,
  et1,
  h1,
  hB1,
  ka,
  nl,
  nt1,
  ot1,
  qC,
  rt1,
  tt1,
  vB1,
  vc,
  yB1,
  yQe
} from "./chunk-2ZELARZW.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/70f9cad3.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var p = [{
  label: "Text",
  value: "Text",
  extra: /.*/,
  help: ""
}, {
  label: "Email",
  value: "Email",
  extra: cQe,
  help: _("validationDesc.email")
}, {
  label: "URL",
  value: "URL",
  extra: X6n,
  help: _("validationDesc.url")
}, {
  label: "Regex",
  value: "Regex",
  extra: void 0,
  help: _("validationDesc.regex")
}];
var i = h1.fromPairs(p.map((e) => [e.value, e]));
var b = (e) => {
  var o;
  if (e.customRule)
    return {
      validateStatus: "error",
      help: e.customRule
    };
  const t = e.value.value;
  if (e.required && t.length === 0)
    return {
      validateStatus: "error",
      help: _("prop.required")
    };
  if (e.maxLength > 0 && t.length > e.maxLength)
    return {
      validateStatus: "error",
      help: _("validationDesc.maxLength", {
        length: t.length,
        maxLength: e.maxLength
      })
    };
  if (e.minLength > 0 && t.length < e.minLength)
    return {
      validateStatus: "error",
      help: _("validationDesc.minLength", {
        length: t.length,
        minLength: e.minLength
      })
    };
  const a = e.validationType, n = ((o = i[a]) == null ? void 0 : o.extra) ?? e.regex;
  return t && !n.test(t) ? {
    validateStatus: "error",
    help: i[a].help
  } : {
    validateStatus: ""
  };
};
var G = HQe({
  name: "invalid",
  desc: _("export.invalidDesc"),
  depKeys: ["value", "required", "minLength", "maxLength", "validationType", "regex", "customRule"],
  func: (e) => b({
    ...e,
    value: {
      value: e.value
    }
  }).validateStatus !== ""
});
var ae = [G, ...RQe];
var ne = {
  defaultValue: QU1("defaultValue"),
  value: QU1("value"),
  disabled: H3,
  label: GK1,
  placeholder: M2,
  onEvent: $11,
  readOnly: ao,
  // validation
  required: ao,
  minLength: vc,
  maxLength: vc,
  validationType: ca(p, "Text"),
  regex: yQe,
  customRule: SQe,
  ...c
};
var Q = (e) => ({
  disabled: e.disabled,
  readOnly: e.readOnly,
  placeholder: e.placeholder,
  defaultValue: e.defaultValue.value,
  value: e.value.value,
  onFocus: () => e.onEvent("focus"),
  onBlur: () => e.onEvent("blur"),
  onPressEnter: () => e.onEvent("submit")
});
var oe = (e) => {
  const [t, a] = (0, import_react.useState)({}), n = (0, import_react.useRef)(false), o = (0, import_react.useRef)(e);
  o.current = e;
  const s = {
    ...e.defaultValue
  }.value, d = {
    ...e.value
  }.value;
  (0, import_react.useEffect)(() => {
    e.value.onChange(s);
  }, [s]), (0, import_react.useEffect)(() => {
    n.current && (a(b({
      ...o.current,
      value: {
        value: d
      }
    })), o.current.onEvent("change"), n.current = false);
  }, [d]);
  const V = (R) => {
    e.value.onChange(R.target.value), n.current = true;
  };
  return [{
    ...Q(e),
    onChange: V
  }, t];
};
var re = (e) => N(ka, {
  name: b0.basic,
  children: [e.defaultValue.propertyView({
    label: _("prop.defaultValue")
  }), hB1(e)]
});
var ie = (e) => N(ka, {
  name: b0.interaction,
  children: [e.onEvent.getPropertyView(), qC(e)]
});
var le = (e) => {
  var t;
  return N(ka, {
    name: b0.validation,
    children: [vB1(e), e.validationType.propertyView({
      label: _("prop.textType")
    }), ((t = i[e.validationType.getView()]) == null ? void 0 : t.extra) === void 0 && CB1(e), yB1(e), bB1(e), e.customRule.propertyView({})]
  });
};
function ue(e, t) {
  return T2`
    border-radius: ${e.radius};
    border-width: ${e.borderWidth};
    padding: ${e.padding};	
    // still use antd style when disabled
    &:not(.ant-input-disabled, .ant-input-affix-wrapper-disabled),
    input {
      color: ${e.text};
      font-size: ${e.textSize};
      font-weight: ${e.textWeight};
      font-family: ${e.fontFamily};
      font-style:${e.fontStyle};
      text-transform:${e.textTransform};
      text-decoration:${e.textDecoration};
      background-color: ${e.background};
      border-color: ${e.border};
      // line-height: ${e.lineHeight};

      &:focus,
      &.ant-input-affix-wrapper-focused {
        border-color: ${e.accent};
      }

      &:hover {
        border-color: ${e.accent};
      }

      &::-webkit-input-placeholder {
        color: ${e.text};
        opacity: 0.4;
      }

      .ant-input-show-count-suffix,
      .ant-input-prefix,
      .ant-input-suffix svg {
        opacity: 0.45;
        color: ${e.text};
      }

      .ant-input-clear-icon svg:hover {
        opacity: 0.65;
      }
    }
  `;
}
var ce = [...TQe([et1, tt1, rt1, at1]), {
  method: nt1,
  execute: (e, t) => {
    var a, n;
    return (n = (a = e.children.viewRef.viewRef) == null ? void 0 : a.input) == null ? void 0 : n.click();
  }
}, {
  method: ot1,
  execute: (e, t) => {
    var a, n, o;
    return (o = (n = (a = e.children.viewRef.viewRef) == null ? void 0 : a.input) == null ? void 0 : n.setRangeText) == null ? void 0 : o.call(n, ...t);
  }
}];
function se(e) {
  if (e === "")
    return {};
  for (const t in e)
    nl(e[t], ["array"], t, (a) => (nl(a, ["string"]), a));
  return e;
}
function de(e) {
  if (!e)
    return e;
  if (e.value && !e.defaultValue) {
    const t = e.value;
    return {
      ...e,
      defaultValue: t,
      value: ""
    };
  }
  return e;
}

export {
  p,
  b,
  ae,
  ne,
  Q,
  oe,
  re,
  ie,
  le,
  ue,
  ce,
  se,
  de
};
//# sourceMappingURL=chunk-KGJNSQSZ.js.map
