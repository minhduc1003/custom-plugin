import {
  A9,
  Bn,
  E3,
  Hs,
  N,
  Pte,
  QDe,
  Qn,
  SI,
  To,
  X8,
  X9,
  _,
  d,
  de,
  eh,
  g7,
  hXe,
  ko,
  m5,
  p1,
  y5,
  zr
} from "./chunk-2ZELARZW.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/02e069a4.js
var import_react = __toESM(require_react(), 1);
var m = Object.defineProperty;
var b = (e, t, r) => t in e ? m(e, t, { enumerable: true, configurable: true, writable: true, value: r }) : e[t] = r;
var p = (e, t, r) => (b(e, typeof t != "symbol" ? t + "" : t, r), r);
var K = class {
  constructor(t, r) {
    p(this, "queryLibraryComp");
    p(this, "setQueryLibraryState");
    this.queryLibraryComp = t, this.setQueryLibraryState = r;
  }
  changeStateFn(t) {
    this.setQueryLibraryState((r) => {
      const n = t(r);
      return hXe(r, n);
    });
  }
  setComp(t) {
    this.changeStateFn((r) => ({ queryLibraryComp: t(r.queryLibraryComp) }));
  }
  getNameGenerator() {
    const t = new g7(), r = this.nameAndExposingInfo();
    return t.init(Object.keys(r)), t;
  }
  nameAndExposingInfo() {
    return this.queryLibraryComp.nameAndExposingInfo();
  }
  checkRename(t, r) {
    const n = Pte(r);
    return n || (r !== t && this.nameAndExposingInfo().hasOwnProperty(r) ? _("query.nameExists", { name: r }) : "");
  }
  rename(t, r) {
    return this.checkRename(t, r) ? false : (r !== t && this.queryLibraryComp.dispatch(QDe(t, r)), true);
  }
};
var y = import_react.default.createContext(void 0);
var O = {
  name: eh,
  description: Bn(""),
  value: Hs
};
var B = (e) => {
  const [t, r] = (0, import_react.useState)(e.showPopover), n = (0, import_react.useContext)(y), c = e.comp.children.name.getView();
  return N("div", {
    style: {
      position: "relative",
      width: "100%"
    },
    children: [e.comp.children.value.propertyView({
      key: c,
      label: d(SI, {
        visible: t,
        setVisible: r,
        content: N(p1, {
          children: [e.comp.children.name.propertyView({
            label: _("queryLibrary.inputName"),
            onValidate: (a, s) => n.checkRename(a, s),
            onFinish: (a, s) => n.rename(a, s)
          }), d(ko, {
            label: _("queryLibrary.inputDesc"),
            children: d(A9, {
              value: e.comp.children.description.getView(),
              onChange: (a) => {
                e.comp.children.description.dispatchChangeValueAction(a.target.value);
              }
            })
          })]
        }),
        title: _("edit"),
        children: d("div", {
          style: {
            cursor: "pointer"
          },
          children: c
        })
      }),
      layout: "vertical",
      tooltip: e.comp.children.description.getView()
    }), d(X8, {
      items: [{
        text: _("edit"),
        onClick: () => r(true)
      }],
      del: e.onDelete,
      children: d(W, {
        tabIndex: -1
      })
    })]
  });
};
var D = class extends To(O) {
  propertyView(e) {
    return d(B, {
      comp: this,
      ...e
    });
  }
};
var M = X9(D, {}, (e) => e.children.value.exposingNode());
var T = de.div`
  padding: 0 16px;
`;
var W = de(m5)`
  cursor: pointer;
  flex-shrink: 0;
  position: absolute;
  top: 0;
  right: 0;

  g {
    fill: #8b8fa3;
  }

  &:hover {
    background: #eef0f3;
    border-radius: 4px;
    cursor: pointer;

    g {
      fill: #3377ff;
    }
  }
`;
var z = de(zr)`
  height: 28px;
  width: 70px;
  background-color: #fafbff;
  color: #4965f2;
  border-color: #c9d1fc;
  display: flex;
  align-items: center;
  box-shadow: none;

  &:hover {
    color: #315efb;
    background-color: #f5faff;
    border-color: #c2d6ff;
  }

  &:focus {
    color: #315efb;
    background-color: #f5faff;
    border-color: #c2d6ff;
  }

  &:disabled,
  &:disabled:hover {
    background: #f9fbff;
    border: 1px solid #dee9ff;
    border-radius: 4px;
  }
`;
var H = de.div`
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 12px;
`;
var J = Qn(E3(M), (e) => {
  const t = (0, import_react.useContext)(y), [r, n] = (0, import_react.useState)(void 0);
  (0, import_react.useEffect)(() => {
    n(void 0);
  }, [e]);
  const c = () => {
    e.dispatch(e.pushAction({
      name: t.getNameGenerator().genItemName("queryInput")
    })), n(e.getView().length);
  };
  return d(T, {
    children: e.getView().length > 0 ? N(H, {
      children: [e.getView().map((a, s) => d(import_react.Fragment, {
        children: a.propertyView({
          onDelete: () => e.dispatch(e.deleteAction(s)),
          showPopover: s === r
        })
      }, s)), d(z, {
        onClick: c,
        children: _("addItem")
      })]
    }) : d(y5, {
      text: N(p1, {
        children: [d("div", {
          children: _("queryLibrary.emptyInputs")
        }), d("span", {
          style: {
            color: "#4965f2",
            cursor: "pointer",
            margin: "0 4px"
          },
          onClick: c,
          children: _("queryLibrary.clickToAdd")
        })]
      })
    })
  });
});
var U = Object.freeze(Object.defineProperty({
  __proto__: null,
  InputListComp: J
}, Symbol.toStringTag, { value: "Module" }));

export {
  K,
  y,
  J,
  U
};
//# sourceMappingURL=chunk-3MLNRNR6.js.map
