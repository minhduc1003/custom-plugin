import {
  a
} from "./chunk-JWNUD2I7.js";
import {
  c,
  h
} from "./chunk-A3UAJ3XR.js";
import {
  Jb
} from "./chunk-6C7C6SYL.js";
import {
  E7,
  Fj1,
  GK1,
  H0,
  N,
  N11,
  VS,
  Vr,
  _,
  ao,
  aq1,
  b0,
  d,
  de,
  gM,
  i3,
  ka,
  nc,
  p1,
  s2e,
  t2,
  tU1,
  ua,
  vo,
  zc,
  zte
} from "./chunk-2ZELARZW.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/45952886.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var Z = de.div`
  background-color: #fff;
  border: 1px solid #d7d9e0;
  border-radius: 4px;
  height: 100%;
  overflow-y: ${(e) => e.$showVerticalScrollbar ? "scroll" : "auto"};
`;
function G(e) {
  return e && !e.hasOwnProperty("label") ? {
    ...e,
    label: {
      text: ""
    }
  } : e;
}
function I(e) {
  return e && e.hasOwnProperty("default") ? {
    ...e,
    value: e.default
  } : e;
}
var W = {
  value: aq1("value", a),
  onEvent: N11,
  autoHeight: t2(gM, "auto"),
  showVerticalScrollbar: ao,
  label: t2(GK1, {
    position: "column"
  }),
  style: nc(tU1, "style"),
  animationStyle: nc(Fj1, "animationStyle"),
  ...c
};
var o = function() {
  return new VS(W, (e) => {
    var w;
    const r = (0, import_react.useRef)(null), f = (0, import_react.useRef)(null), S = (0, import_react.useRef)(false), m = (0, import_react.useRef)(null), s = (0, import_react.useRef)(), {
      extensions: y
    } = Jb({
      codeType: "PureJSON",
      language: "json",
      showLineNum: true,
      enableClickCompName: false,
      onFocus: (a2) => {
        var u;
        a2 && ((u = r.current) == null || u.click());
      },
      onChange: (a2) => {
        s.current = a2.doc.toString();
        try {
          const u = JSON.parse(a2.doc.toString());
          e.value.onChange(u), e.onEvent("change");
        } catch {
        }
      }
    });
    if ((0, import_react.useEffect)(() => {
      !S.current && r.current && (m.current = i3.create({
        doc: JSON.stringify(e.value.value, null, 2),
        extensions: y
      }));
    }, [r.current]), (0, import_react.useEffect)(() => {
      m.current && r.current && (f.current = new ua({
        state: m.current,
        parent: r.current
      }), S.current = true);
    }, [e.showVerticalScrollbar]), r.current && f.current && !s.current) {
      const a2 = i3.create({
        doc: JSON.stringify(e.value.value, null, 2),
        extensions: y
      });
      (w = f.current) == null || w.setState(a2);
    }
    return s.current && (s.current = void 0), e.label({
      style: e.style,
      animationStyle: e.animationStyle,
      children: d(zc, {
        hideScrollbar: !e.showVerticalScrollbar,
        children: d(Z, {
          ref: r,
          onFocus: () => s.current = "focus",
          $height: e.autoHeight,
          $showVerticalScrollbar: e.showVerticalScrollbar
        })
      })
    });
  }).setPropertyViewFn((e) => N(p1, {
    children: [d(ka, {
      name: b0.basic,
      children: e.value.propertyView({
        label: _("export.jsonEditorDesc")
      })
    }), d(h, {
      ...e
    }), ((0, import_react.useContext)(Vr).editorModeStatus === "logic" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && N(ka, {
      name: b0.interaction,
      children: [e.onEvent.getPropertyView(), E7(e)]
    }), d(ka, {
      name: _("prop.height"),
      children: e.autoHeight.propertyView({
        label: _("prop.height")
      })
    }), !e.autoHeight.getView() && d(ka, {
      name: b0.layout,
      children: e.showVerticalScrollbar.propertyView({
        label: _("prop.showVerticalScrollbar")
      })
    }), ((0, import_react.useContext)(Vr).editorModeStatus === "layout" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && e.label.getPropertyView(), ((0, import_react.useContext)(Vr).editorModeStatus === "layout" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && N(p1, {
      children: [d(ka, {
        name: b0.style,
        children: e.style.getPropertyView()
      }), d(ka, {
        name: b0.animationStyle,
        hasTooltip: true,
        children: e.animationStyle.getPropertyView()
      })]
    })]
  })).build();
}();
o = zte(o, G);
o = zte(o, I);
o = class extends o {
  autoHeight() {
    return this.children.autoHeight.getView();
  }
};
var te = H0(o, [new vo("value", _("export.jsonEditorDesc")), s2e]);

export {
  te
};
//# sourceMappingURL=chunk-3RMRONVZ.js.map
