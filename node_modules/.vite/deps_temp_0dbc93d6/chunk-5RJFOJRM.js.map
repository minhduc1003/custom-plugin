{
  "version": 3,
  "sources": ["../../lowcoder-sdk/dist/f4dd517e.js"],
  "sourcesContent": ["import { Y as o, X as P, bY as F, w as Q, S as U, Z as $, bZ as q, az as H, U as T, F as s, G as E, ah as I, a8 as k, a9 as f, aa as w, ab as G, ac as O, ae as B, ad as W, b_ as Y, b$ as Z, c0 as _ } from \"./c988e26e.js\";\nimport { useContext as R, useRef as d, useEffect as D } from \"react\";\nimport { EventTypeEnum as l } from \"./30970d5d.js\";\nimport \"react-dom\";\nconst z = {\n  name: \"{{currentUser.name}}\",\n  text: o(\"customComp.text\"),\n  query: \"query1\"\n}, X = `\n  <style type=\"text/css\">\n  body {\n    padding: 5px;\n  }\n  </style>\n  \n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://unpkg.com/antd@4.21.4/dist/antd.min.css\"/>\n  <script type=\"text/javascript\" src=\"https://unpkg.com/antd@4.21.4/dist/antd.min.js\" ><\\/script>\n  \n  <div id=\"root\"></div>\n  \n  <script type=\"text/babel\">\n  \n  const { Button, Card, Space } = antd;\n  \n  const MyCustomComponent = ({ runQuery, model, updateModel}) => (\n    <Card title={\"Hello, \" + model.name}>\n        <p>{model.text}</p>\n        <Space>\n          <Button\n            type=\"primary\"\n            onClick={() => runQuery(model.query)}\n         >\n            ${o(\"customComp.triggerQuery\")}\n          </Button>\n          <Button\n            onClick={() => updateModel({ text: \"${o(\"customComp.updateText\")}\" })}\n          >\n          ${o(\"customComp.updateData\")}\n          </Button>\n      </Space>\n    </Card>\n  );\n  \n  const ConnectedComponent = ${o(\"customComp.sdkGlobalVarName\")}.connect(MyCustomComponent);\n  const root = ReactDOM.createRoot(document.getElementById(\"root\"));\n  root.render(<ConnectedComponent />);\n  \n  <\\/script>\n  `, J = P.div`\n  width: 100%;\n  height: 100%;\n  ${(t) => t.$style};\n  rotate: ${(t) => t.$style.rotation};\n  ${(t) => t.$animationStyle};\n  iframe {\n    border: 0;\n    width: 100%;\n    height: 100%;\n    display: block;\n  }\n`;\nfunction m(t, r) {\n  var n;\n  (n = t == null ? void 0 : t.contentWindow) == null || n.postMessage(r, \"*\");\n}\nfunction K(t) {\n  const r = d(String(Date.now())), {\n    model: n,\n    code: c,\n    onModelChange: p,\n    dispatch: A\n  } = t, i = d(null), a = d(n), y = d(!1), V = d({\n    runQuery: async (e) => {\n      const {\n        queryName: u\n      } = e;\n      return Y(A, Z(u, _({}))).catch((C) => Promise.resolve({}));\n    },\n    getModel: async (e) => a.current,\n    updateModel: async (e) => (a.current = {\n      ...a.current,\n      ...e\n    }, m(i.current, {\n      type: l.Data,\n      payload: {\n        model: a.current\n      }\n    }), p(a.current), a.current)\n  });\n  return D(() => {\n    m(i.current, {\n      type: l.Data,\n      payload: {\n        model: n\n      }\n    }), a.current = n;\n  }, [n]), D(() => {\n    if (!i.current)\n      return;\n    const e = i.current, u = (h) => {\n      const {\n        type: b,\n        payload: x,\n        hostId: M\n      } = h.data;\n      if (!b || !x || !M || M !== r.current)\n        return;\n      const {\n        method: v,\n        data: j,\n        id: L\n      } = x;\n      if (b === l.Invoke) {\n        const g = V.current[v];\n        if (!g || typeof g != \"function\")\n          return;\n        g(j).then((N) => {\n          m(e, {\n            type: l.Invoke,\n            payload: {\n              id: L,\n              method: v,\n              response: N\n            }\n          });\n        });\n      }\n    }, C = () => {\n      m(e, {\n        type: l.Init,\n        payload: {\n          hostId: r.current,\n          code: c\n        }\n      });\n    };\n    window.addEventListener(\"message\", u), e.addEventListener(\"load\", C);\n    const S = e.getAttribute(\"src\");\n    if (S && y) {\n      y.current = !1;\n      const h = new URL(\"?_t=\" + Date.now(), S);\n      e.setAttribute(\"src\", h.toString());\n    }\n    return () => {\n      y.current = !0, window.removeEventListener(\"message\", u), e.removeEventListener(\"load\", C);\n    };\n  }, [c]), /* @__PURE__ */ s(J, {\n    $style: t.style,\n    $animationStyle: t.animationStyle,\n    children: /* @__PURE__ */ s(\"iframe\", {\n      ref: i,\n      title: \"custom-comp\",\n      src: o(\"customComponent.entryUrl\")\n    })\n  });\n}\nconst tt = {\n  model: F(z),\n  code: Q(U, X),\n  style: $(q, \"style\"),\n  animationStyle: $(H, \"animationStyle\")\n}, et = new T(tt, (t, r) => {\n  const {\n    code: n,\n    model: c\n  } = t;\n  return /* @__PURE__ */ s(K, {\n    style: t.style,\n    animationStyle: t.animationStyle,\n    code: n,\n    model: c.value,\n    onModelChange: (p) => c.onChange(p),\n    dispatch: r\n  });\n}).setPropertyViewFn((t) => /* @__PURE__ */ s(E, {\n  children: (R(I).editorModeStatus === \"logic\" || R(I).editorModeStatus === \"both\") && /* @__PURE__ */ k(E, {\n    children: [/* @__PURE__ */ k(f, {\n      name: w.interaction,\n      children: [t.model.propertyView({\n        label: o(\"customComp.data\")\n      }), t.code.propertyView({\n        label: o(\"customComp.code\"),\n        language: \"html\"\n      }), G(t)]\n    }), /* @__PURE__ */ s(f, {\n      name: w.style,\n      children: t.style.getPropertyView()\n    }), /* @__PURE__ */ s(f, {\n      name: w.animationStyle,\n      hasTooltip: !0,\n      children: t.animationStyle.getPropertyView()\n    })]\n  })\n})).build();\nclass ot extends et {\n  autoHeight() {\n    return !1;\n  }\n}\nconst ct = O(ot, [new B(\"model\", o(\"data\")), new B(\"code\", o(\"code\")), W]);\nexport {\n  ct as CustomComp\n};\n"],
  "mappings": "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",
  "names": ["d", "e", "D", "N", "R"]
}
