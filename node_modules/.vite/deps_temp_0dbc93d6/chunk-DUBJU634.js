import {
  Kh2,
  M0,
  M2,
  N,
  Ns,
  P4,
  T2,
  Th2,
  Tx,
  U8,
  W4,
  YKe,
  Yh2,
  _,
  ao,
  c1e,
  ca,
  d,
  d1e,
  d4,
  de,
  h1,
  j4,
  k9,
  mer,
  nFe,
  nm2,
  o2,
  q8,
  rFe,
  sa,
  t2,
  tH,
  xee,
  yv2,
  z3,
  zr
} from "./chunk-2ZELARZW.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/464239f7.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var be = de.div`
  display: flex;
  align-items: center;
  gap: 8px;
`;
var fe = (e, t, o, c, u) => T2`
    background-color: ${e.background};
    // Implement horizontal scrollbar and vertical page number selection is not blocked
    padding: 13px 12px;
    position: sticky;
    postion: -webkit-sticky;
    left: 0px !important;
    margin: ${e.margin} !important;
    z-index: 999;

    ${u && c === "below" && "bottom: 0;"};
    ${u && c === "above" && "top: 0;"};

    .toolbar-icons {
      .refresh,
      .download {
        cursor: pointer;

        * {
          ${e.toolbarText !== P4.textDark ? `stroke: ${e.toolbarText}` : null};
        }

        &:hover * {
          stroke: ${o == null ? void 0 : o.primary};
        }
      }

      .filter {
        cursor: pointer;

        * {
          ${t ? `stroke: ${P4.primary}` : e.toolbarText !== P4.textDark ? `stroke: ${e.toolbarText}` : null}
        }

        &:hover * {
          stroke: ${o == null ? void 0 : o.primary};
        }
      }

      .column-setting {
        width: 20px;
        cursor: pointer;

        * {
          ${e.toolbarText && e.toolbarText !== P4.textDark ? `fill: ${e.toolbarText}` : "fill: #8b8fa3"} 
        }

        &:hover * {
          fill: ${o == null ? void 0 : o.primary};
        }
      }
    }

    .ant-pagination-prev,
    .ant-pagination-next {
      path {
        ${e.toolbarText !== P4.textDark ? `fill: ${e.toolbarText}` : null};
      }

      svg:hover {
        path {
          fill: ${o == null ? void 0 : o.primary};
        }
      }
    }

    .ant-pagination {
      color: ${e.toolbarText};
    }

    .ant-pagination-item-active {
      border-color: ${e.border || (o == null ? void 0 : o.primary)};

      a {
        color: ${o == null ? void 0 : o.textDark};
      }
    }

    .ant-pagination-item:not(.ant-pagination-item-active) a {
      color: ${e.toolbarText};

      &:hover {
        color: ${o == null ? void 0 : o.primary};
      }
    }

    .ant-select:not(.ant-select-disabled):hover .ant-select-selector,
    .ant-select-focused:not(.ant-select-disabled).ant-select:not(.ant-select-customize-input)
      .ant-select-selector,
    .ant-pagination-options-quick-jumper input:hover,
    .ant-pagination-options-quick-jumper input:focus {
      border-color: ${e.border || (o == null ? void 0 : o.primary)};
    }
  `;
var ge = de.div`
  // overflow: auto;
  ${(e) => e.$style && fe(e.$style, e.$filtered, e.$theme, e.$position, e.$fixedToolbar)}
`;
var he = de.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-width: max-content;
  height: 21px;
  width: 100%;
`;
var we = de.div`
  display: flex;
  align-items: center;
  gap: 8px;
`;
var me = de(xee)`
  height: 16px;
  width: 16px;

  ${(e) => e.disabled && `
      cursor: not-allowed;
      g g {
      stroke: #D7D9E0;
    }
  `}
  :hover:not([disabled]) {
    cursor: pointer;

    g g {
      stroke: #315efb;
    }
  }
`;
var xe = de.div`
  display: flex;
  align-items: center;
  gap: 8px;
`;
var ye = de.div`
  min-height: 92px;
  overflow: auto;

  > div {
    margin-top: 4px;
  }
`;
var Ce = de.div`
  display: flex;
  align-items: end;
  height: 44px;
  justify-content: end;
  gap: 4px;

  > button {
    width: 76px;
    height: 28px;
  }
`;
var O = de.div`
  display: flex;
  gap: 4px;
`;
var H = [{
  label: _("table.and"),
  value: "and"
}, {
  label: _("table.or"),
  value: "or"
}];
var ve = [{
  label: d(rFe, {}),
  value: "below"
}, {
  label: d(nFe, {}),
  value: "above"
}, {
  label: d(Th2, {}),
  value: "close"
}];
var ke = ["contain", "notContain", "equal", "notEqual", "isEmpty", "isNotEmpty", "gt", "gte", "lt", "lte"];
var A = ["isEmpty", "isNotEmpty"];
var Te = {
  contain: {
    label: _("table.contains"),
    filter: (e, t) => o2.isNil(t) ? false : t.toString().toLowerCase().includes(e.toLowerCase())
  },
  notContain: {
    label: _("table.notContain"),
    filter: (e, t) => o2.isNil(t) ? true : !t.toString().toLowerCase().includes(e.toLowerCase())
  },
  equal: {
    label: _("table.equals"),
    filter: (e, t) => o2.isNil(t) ? false : t.toString() === e
  },
  notEqual: {
    label: _("table.isNotEqual"),
    filter: (e, t) => o2.isNil(t) ? true : t.toString() !== e
  },
  isEmpty: {
    label: _("table.isEmpty"),
    filter: (e, t) => t === "" || o2.isNil(t)
  },
  isNotEmpty: {
    label: _("table.isNotEmpty"),
    filter: (e, t) => t !== "" && !o2.isNil(t)
  },
  gt: {
    label: _("table.greater"),
    filter: (e, t) => h1.gt(t, e)
  },
  gte: {
    label: _("table.greaterThanOrEquals"),
    filter: (e, t) => h1.gte(t, e)
  },
  lt: {
    label: _("table.lessThan"),
    filter: (e, t) => h1.gt(e, t)
  },
  lte: {
    label: _("table.lessThanOrEquals"),
    filter: (e, t) => h1.gte(e, t)
  }
};
var $ = (e = "", t = "", o) => ({
  key: W4(),
  columnKey: e,
  filterValue: t,
  operator: o
});
function Ve(e) {
  return e.columnKey && e.operator && (e.filterValue !== "" || A.includes(e.operator));
}
function $e(e) {
  return !e.columnKey && !e.operator && e.filterValue === "";
}
function Fe(e) {
  const {
    columnKeyNames: t,
    tableFilter: o,
    onFilterChange: c,
    setVisible: u
  } = e, [d2, p] = (0, import_react.useState)(o.stackType), [i, s] = (0, import_react.useState)(() => o.filters.length <= 0 ? [$()] : o.filters.map((n) => ({
    key: W4(),
    ...n
  }))), f = (n) => {
    s(i.map((g) => g.key === n.key ? {
      ...n
    } : g));
  };
  (0, import_react.useEffect)(() => {
    c(i.filter((n) => Ve(n)).map((n) => ({
      filterValue: n.filterValue,
      operator: n.operator,
      columnKey: n.columnKey
    })), d2);
  }, [d2, i]);
  const S = d(ye, {
    children: i && i.map((n, g) => {
      var v;
      return N(xe, {
        children: [g === 0 && d(d4, {
          style: {
            width: "65px"
          },
          children: _("table.filterRule")
        }), g >= 1 && d(j4, {
          style: {
            width: "65px"
          },
          border: true,
          defaultValue: d2,
          value: (v = H.find((r) => r.value === d2)) == null ? void 0 : v.value,
          disabled: g > 1,
          onChange: (r) => p(r),
          children: H.map((r, R) => d(j4.Option, {
            value: r.value,
            children: d("div", {
              style: {
                width: "72px",
                fontSize: "13px",
                lineHeight: "13px"
              },
              children: r.label
            })
          }, r.value))
        }), d(j4, {
          options: t.map((r) => ({
            label: r[1],
            value: r[0]
          })),
          style: {
            width: "160px"
          },
          value: n.columnKey,
          placeholder: _("table.chooseColumnName"),
          allowClear: true,
          onChange: (r) => {
            f({
              ...n,
              columnKey: r
            });
          }
        }), d(j4, {
          defaultValue: n.operator,
          placeholder: _("table.chooseCondition"),
          style: {
            width: "160px"
          },
          allowClear: true,
          options: ke.map((r) => ({
            label: Te[r].label,
            value: r
          })),
          onChange: (r) => {
            f({
              ...n,
              operator: r
            });
          }
        }), d(Ns, {
          style: {
            width: "136px"
          },
          disabled: n.operator && A.includes(n.operator),
          defaultValue: n.filterValue,
          onChange: (r) => {
            f({
              ...n,
              filterValue: r.target.value
            });
          }
        }), d(me, {
          disabled: i.length === 1 && $e(i[0]),
          onClick: () => {
            i.length === 1 ? s([$()]) : s(i.filter((r) => r.key !== n.key));
          }
        })]
      }, n.key);
    })
  }), T = N(Ce, {
    children: [d(tH, {
      style: {
        marginRight: "auto"
      },
      text: _("addItem"),
      icon: d(q8, {}),
      onClick: () => {
        s(i.concat($()));
      }
    }), d(zr, {
      onClick: () => {
        s([$()]);
      },
      buttonType: "delete",
      children: _("table.clear")
    }), d(zr, {
      buttonType: "primary",
      onClick: () => u(false),
      children: _("ok")
    })]
  });
  return d(c1e, {
    title: _("table.filter"),
    onClose: () => u(false),
    width: 600,
    scrollable: true,
    contentMaxHeight: 292,
    content: S,
    footer: T
  });
}
var Ie = function() {
  const e = {
    showRefresh: ao,
    showDownload: ao,
    showFilter: ao,
    columnSetting: ao,
    fixedToolbar: ao,
    // searchText: StringControl,
    filter: z3({
      stackType: "and",
      filters: []
    }),
    position: ca(ve, "below"),
    columnSeparator: t2(M2, ","),
    showUpdateButtons: t2(ao, true)
  };
  return new mer(e, (t, o) => ({
    ...t,
    onFilterChange: (c, u) => {
      o(U8("filter", {
        stackType: u,
        filters: c
      }, false));
    }
  })).setPropertyViewFn((t) => [
    t.position.propertyView({
      label: _("table.position"),
      radioButton: true
    }),
    t.fixedToolbar.propertyView({
      label: _("table.fixedToolbar"),
      tooltip: _("table.fixedToolbarTooltip")
    }),
    t.showUpdateButtons.propertyView({
      label: _("table.showUpdateButtons")
    }),
    t.showFilter.propertyView({
      label: _("table.showFilter")
    }),
    t.showRefresh.propertyView({
      label: _("table.showRefresh")
    }),
    t.showDownload.propertyView({
      label: _("table.showDownload")
    }),
    t.showDownload.getView() && t.columnSeparator.propertyView({
      label: _("table.columnSeparator"),
      tooltip: _("table.columnSeparatorTooltip")
    }),
    t.columnSetting.propertyView({
      label: _("table.columnSetting")
    })
    /* children.searchText.propertyView({
      label: trans("table.searchText"),
      tooltip: trans("table.searchTextTooltip"),
      placeholder: "{{input1.value}}",
    }), */
  ]).build();
}();
function Se(e) {
  const {
    columns: t,
    setVisible: o
  } = e;
  let c = true;
  const u = t.map((d2) => {
    const p = d2.getView(), i = !p.tempHide;
    return i || (c = false), N(O, {
      children: [d(d1e, {
        checked: i,
        onChange: (s) => {
          d2.children.tempHide.dispatchChangeValueAction(!s.target.checked);
        }
      }), d(d4, {
        children: p.title || p.dataIndex
      })]
    }, p.dataIndex);
  });
  return d(c1e, {
    title: _("table.columnShows"),
    onClose: () => o(false),
    width: 160,
    contentMaxHeight: 150,
    scrollable: true,
    content: d("div", {
      style: {
        display: "flex",
        flexDirection: "column",
        gap: "8px"
      },
      children: u
    }),
    footer: d("div", {
      style: {
        display: "flex",
        alignItems: "flex-end",
        justifyContent: "space-between",
        height: "32px"
      },
      children: N(O, {
        children: [d(d1e, {
          checked: c,
          onChange: (d2) => {
            const p = d2.target.checked;
            t.forEach((i) => {
              const s = i.children.tempHide.getView();
              p && s ? i.children.tempHide.dispatchChangeValueAction(false) : !p && !s && i.children.tempHide.dispatchChangeValueAction(true);
            });
          }
        }), d(d4, {
          children: _("table.selectAll")
        })]
      })
    })
  });
}
function j(e) {
  const {
    visible: t,
    setVisible: o,
    Icon: c,
    iconClassName: u,
    content: d2
  } = e, p = (0, import_react.useRef)(null), i = (0, import_react.useRef)(null);
  return d(k9, {
    open: t,
    overlayStyle: {
      pointerEvents: "auto"
    },
    overlayInnerStyle: {
      padding: "0"
    },
    content: d("div", {
      ref: i,
      tabIndex: -1,
      onBlur: (s) => {
        !s.currentTarget.contains(s.relatedTarget) && p.current !== s.relatedTarget && o(false);
      },
      children: d2
    }),
    children: d(c, {
      className: u,
      tabIndex: -1,
      ref: p,
      onBlur: (s) => {
        var f;
        (f = i.current) != null && f.contains(s.relatedTarget) || o(false);
      },
      onClick: () => o(!t)
    })
  });
}
function Be(e) {
  var E;
  const {
    toolbar: t,
    pagination: o,
    columns: c,
    onRefresh: u,
    onDownload: d2,
    hasChange: p,
    onSaveChanges: i,
    onCancelChanges: s,
    onEvent: f
  } = e, [S, T] = (0, import_react.useState)(false), [n, g] = (0, import_react.useState)(false), v = c.filter((b) => !b.children.hide.getView()), r = (0, import_react.useMemo)(() => v.map((b) => {
    const w = b.getView();
    return [w.dataIndex, w.title || w.dataIndex];
  }), [c]), R = (E = (0, import_react.useContext)(M0)) == null ? void 0 : E.theme;
  return d(ge, {
    $style: e.$style,
    $theme: R || P4,
    $filtered: t.filter.filters.length > 0,
    $position: t.position,
    $fixedToolbar: t.fixedToolbar,
    children: N(he, {
      children: [N(we, {
        className: "toolbar-icons",
        children: [t.showRefresh && d(nm2, {
          className: "refresh",
          onClick: () => {
            u(), f("refresh");
          }
        }), t.showFilter && d(j, {
          visible: S,
          setVisible: T,
          content: d(Fe, {
            columnKeyNames: r,
            tableFilter: t.filter,
            onFilterChange: (b, w) => {
              (!h1.isEqual(b, t.filter.filters) || w !== t.filter.stackType) && (t.onFilterChange(b, w), f("filterChange"));
            },
            setVisible: (b) => T(b)
          }),
          Icon: Kh2,
          iconClassName: "filter"
        }), t.showDownload && d(Yh2, {
          className: "download",
          onClick: d2
        }), t.columnSetting && d(j, {
          visible: n,
          setVisible: g,
          content: d(Se, {
            columns: v,
            setVisible: g
          }),
          Icon: yv2,
          iconClassName: "column-setting"
        })]
      }), d(Tx, {
        size: "small",
        itemRender: YKe,
        ...o,
        onChange: (b, w) => {
          o.onChange && o.onChange(b, w), b !== o.current && f("pageChange");
        }
      }), p && t.showUpdateButtons && N(be, {
        children: [d(sa, {
          onClick: s,
          children: _("cancel")
        }), d(sa, {
          type: "primary",
          onClick: i,
          children: _("table.saveChanges")
        })]
      })]
    })
  });
}

export {
  Te,
  Ie,
  Be
};
//# sourceMappingURL=chunk-DUBJU634.js.map
