import {
  de
} from "./chunk-KGJNSQSZ.js";
import {
  c,
  h
} from "./chunk-A3UAJ3XR.js";
import {
  $11,
  BXe,
  Bse,
  C5,
  E7,
  Fj1,
  G$,
  GK1,
  Gse,
  H0,
  H3,
  HQe,
  JU1,
  LQe,
  M2,
  N,
  N0,
  N3,
  QU1,
  RQe,
  SQe,
  T2,
  TQe,
  VS,
  Vr,
  ZK1,
  _,
  _Qe,
  ao,
  at1,
  b0,
  ca,
  d,
  de as de2,
  et1,
  fW1,
  gB1,
  hB1,
  ka,
  nc,
  nt1,
  ot1,
  p1,
  pQe,
  qC,
  qse,
  rt1,
  t2,
  tt1,
  uW1,
  vB1,
  vc,
  zte
} from "./chunk-2ZELARZW.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/75cd6c85.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
function I(e, t) {
  return t === void 0 && (t = 15), +parseFloat(Number(e).toPrecision(t));
}
function d2(e) {
  var t = e.toString().split(/[eE]/), a = (t[0].split(".")[1] || "").length - +(t[1] || 0);
  return a > 0 ? a : 0;
}
function y(e) {
  if (e.toString().indexOf("e") === -1)
    return Number(e.toString().replace(".", ""));
  var t = d2(e);
  return t > 0 ? I(Number(e) * Math.pow(10, t)) : Number(e);
}
function C(e) {
  D && (e > Number.MAX_SAFE_INTEGER || e < Number.MIN_SAFE_INTEGER) && console.warn(e + " is beyond boundary when transfer to integer, the results may not be accurate");
}
function N2(e) {
  return function() {
    for (var t = [], a = 0; a < arguments.length; a++)
      t[a] = arguments[a];
    var r = t[0], l = t.slice(1);
    return l.reduce(function(u, s) {
      return e(u, s);
    }, r);
  };
}
var h2 = N2(function(e, t) {
  var a = y(e), r = y(t), l = d2(e) + d2(t), u = a * r;
  return C(u), u / Math.pow(10, l);
});
var Ee = N2(function(e, t) {
  var a = Math.pow(10, Math.max(d2(e), d2(t)));
  return (h2(e, a) + h2(t, a)) / a;
});
var Pe = N2(function(e, t) {
  var a = Math.pow(10, Math.max(d2(e), d2(t)));
  return (h2(e, a) - h2(t, a)) / a;
});
var T = N2(function(e, t) {
  var a = y(e), r = y(t);
  return C(a), C(r), h2(a / r, I(Math.pow(10, d2(t) - d2(e))));
});
function Re(e, t) {
  var a = Math.pow(10, t), r = T(Math.round(Math.abs(h2(e, a))), a);
  return e < 0 && r !== 0 && (r = h2(r, -1)), r;
}
var D = true;
function ke(e) {
  e === void 0 && (e = true), D = e;
}
var V = {
  strip: I,
  plus: Ee,
  minus: Pe,
  times: h2,
  divide: T,
  round: Re,
  digitLength: d2,
  float2Fixed: y,
  enableBoundaryChecking: ke
};
var Te = (e) => T2`
    border-radius: ${e.radius};
    border-width:${e.borderWidth} !important;
    // line-height: ${e.lineHeight} !important;
    // still use antd style when disabled
    &:not(.ant-input-number-disabled) {
      color: ${e.text};
      background-color: ${e.background};
      border-color: ${e.border};
      //margin: ${e.margin};	
      padding: 0;	
      width: ${qse(e.margin)};
      &.ant-input-number-focused {
        border-color: ${e.accent};
      }

      &:hover {
        border-color: ${e.accent};
      }

      &::-webkit-input-placeholder {
        color: ${e.text};
        opacity: 0.4;
      }
      .ant-input-number {	
        margin: 0;	
        
      }	
      .ant-input-number-input {	
        margin: 0;	
        padding: ${e.padding};	
        height: ${Gse(e.margin)};	
        color:${e.text};
        font-family:${e.fontFamily} !important;
        font-weight:${e.textWeight} !important;
        font-size:${e.textSize} !important;
        font-style:${e.fontStyle} !important;
      }

      .ant-input-number-handler-wrap {
        background-color: ${e.background};
        border-radius: 0 ${e.radius} ${e.radius} 0;

        .ant-input-number-handler span {
          color: ${e.text};
          opacity: 0.45;

          &:hover {
            opacity: 1;
          }
        }

        .ant-input-number-handler-up {
          border-top-right-radius: ${e.radius};
        }

        .ant-input-number-handler-down {
          border-bottom-right-radius: ${e.radius};
        }
      }
    }
  `;
var De = de2(G$)`
  box-shadow: ${(e) => {
  var t, a;
  return `${(t = e.$style) == null ? void 0 : t.boxShadow} ${(a = e.$style) == null ? void 0 : a.boxShadowColor}`;
}};
  width: 100%;
  ${(e) => e.$style && Te(e.$style)}
`;
var Oe = [{
  label: _("numberInput.standard"),
  value: "standard"
}, {
  label: _("numberInput.percent"),
  value: "percent"
}];
function R(e, t) {
  const a = e.replace(/[^\d.-]/g, "");
  if (a) {
    const r = Number(a);
    if (isFinite(r))
      return r;
  }
  return t ? Number.NaN : 0;
}
function Le(e) {
  const t = e.toString().split(".");
  return t[0] = t[0].replace(/\B(?=(\d{3})+(?!\d))/g, ","), t.join(".");
}
function Ue(e, t, a, r, l) {
  const u = e;
  if (isNaN(u))
    return "";
  let s = u.toFixed(r);
  switch (l && (s = Le(s)), a) {
    case "standard":
      return s;
    case "percent":
      return s + "%";
  }
}
function qe(e, t, a) {
  const r = e;
  if (isNaN(r))
    return t ? null : 0;
  switch (a) {
    case "standard":
      return r;
    case "percent":
      return V.divide(r, 100);
  }
}
function O(e) {
  if (e.customRule)
    return {
      validateStatus: "error",
      help: e.customRule
    };
  const t = e.value.value;
  return isNaN(t) ? e.required ? {
    validateStatus: "error",
    help: _("prop.required")
  } : {
    validateStatus: ""
  } : e.max !== void 0 && t > e.max ? {
    validateStatus: "error",
    help: _("validationDesc.maxValue", {
      value: t,
      max: e.max
    })
  } : e.min !== void 0 && t < e.min ? {
    validateStatus: "error",
    help: _("validationDesc.minValue", {
      value: t,
      min: e.min
    })
  } : {
    validateStatus: ""
  };
}
var k = N3((e) => {
  if (typeof e == "number")
    return e;
  const t = Number(e);
  return !e || isNaN(t) ? void 0 : t;
});
var Be = {
  defaultValue: QU1("defaultValue"),
  // It is more convenient for string to handle various states, save raw input here
  value: JU1("value"),
  // It is more convenient for string to handle various states, save raw input here
  placeholder: M2,
  disabled: H3,
  readOnly: ao,
  label: GK1,
  formatter: ca(Oe, "standard"),
  step: t2(vc, 1),
  controls: ao.DEFAULT_TRUE,
  // Whether to display the increase or decrease button
  precision: pQe.closed(0, 20, 0),
  thousandsSeparator: ao.DEFAULT_TRUE,
  // Whether to display the thousand separator
  allowNull: ao,
  onEvent: $11,
  viewRef: ZK1,
  style: nc(fW1, "style"),
  labelStyle: nc(uW1, "labelStyle"),
  prefixText: QU1("defaultValue"),
  animationStyle: nc(Fj1, "animationStyle"),
  prefixIcon: C5,
  inputFieldStyle: nc(Bse, "inputFieldStyle"),
  // validation
  required: ao,
  min: k,
  max: k,
  customRule: SQe,
  ...c
};
var Ae = (e) => {
  const t = (0, import_react.useRef)(null), a = e.defaultValue.value;
  (0, import_react.useEffect)(() => {
    let n = 0;
    a === "null" && e.allowNull ? n = NaN : isNaN(Number(a)) || (n = Number(a)), e.value.onChange(n);
  }, [a]);
  const r = (n) => Ue(n, e.allowNull, e.formatter, e.precision, e.thousandsSeparator), [l, u] = (0, import_react.useState)(r(e.value.value)), s = () => {
    const n = e.value.value, i = R(l, e.allowNull);
    e.value.onChange(i), n !== i && e.onEvent("change");
  };
  return (0, import_react.useEffect)(() => {
    u(r(e.value.value));
  }, [e.value.value, e.allowNull, e.formatter, e.precision, e.thousandsSeparator]), d(De, {
    ref: (n) => {
      e.viewRef(n), t.current = n;
    },
    value: l,
    controls: e.controls,
    step: e.step,
    disabled: e.disabled,
    readOnly: e.readOnly,
    placeholder: e.placeholder,
    stringMode: true,
    precision: e.precision,
    $style: e.inputFieldStyle,
    prefix: BXe(e.prefixIcon) ? e.prefixIcon : e.prefixText.value,
    onPressEnter: () => {
      s(), e.onEvent("submit");
    },
    onChangeCapture: (n) => {
      var i;
      u((((i = n.target.value) == null ? void 0 : i.toString()) ?? "").replace("。", "."));
    },
    onStep: (n, i) => {
      const g = V.plus(R(l), V.times(i.type === "up" ? 1 : -1, Number(i.offset)));
      e.value.onChange(g), e.onEvent("change");
    },
    onFocus: () => {
      e.onEvent("focus");
    },
    onBlur: () => {
      s(), e.onEvent("blur");
    },
    onKeyPress: (n) => {
      var M;
      const i = l, g = (M = t.current) == null ? void 0 : M.selectionStart;
      /\d/.test(n.key) || g === 0 && n.key === "-" && !/-/.test(i) || g !== 0 && e.thousandsSeparator && n.key === "," || g !== 0 && e.precision > 0 && // eslint-disable-next-line only-ascii/only-ascii
      (n.key === "." || n.key === "。") && !/[.]/.test(i) || n.preventDefault();
    }
  });
};
var $ = function() {
  return new VS(Be, (e) => e.label({
    required: e.required,
    children: d(Ae, {
      ...e
    }),
    style: e.style,
    labelStyle: e.labelStyle,
    inputFieldStyle: e.inputFieldStyle,
    animationStyle: e.animationStyle,
    ...O(e)
  })).setPropertyViewFn((e) => N(p1, {
    children: [N(ka, {
      name: b0.basic,
      children: [e.defaultValue.propertyView({
        label: _("prop.defaultValue")
      }), hB1(e), e.formatter.propertyView({
        label: _("numberInput.formatter")
      })]
    }), d(h, {
      ...e
    }), ((0, import_react.useContext)(Vr).editorModeStatus === "logic" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && N(p1, {
      children: [N(ka, {
        name: b0.validation,
        children: [vB1(e), e.min.propertyView({
          label: _("prop.minimum")
        }), e.max.propertyView({
          label: _("prop.maximum")
        }), e.customRule.propertyView({})]
      }), N(ka, {
        name: b0.interaction,
        children: [e.onEvent.getPropertyView(), qC(e), E7(e)]
      })]
    }), ((0, import_react.useContext)(Vr).editorModeStatus === "layout" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && e.label.getPropertyView(), ((0, import_react.useContext)(Vr).editorModeStatus === "logic" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && N(ka, {
      name: b0.advanced,
      children: [e.step.propertyView({
        label: _("numberInput.step")
      }), e.precision.propertyView({
        label: _("numberInput.precision")
      }), e.prefixIcon.propertyView({
        label: _("button.prefixIcon")
      }), e.prefixText.propertyView({
        label: _("button.prefixText")
      }), e.allowNull.propertyView({
        label: _("numberInput.allowNull")
      }), e.thousandsSeparator.propertyView({
        label: _("numberInput.thousandsSeparator")
      }), e.controls.propertyView({
        label: _("numberInput.controls")
      }), gB1(e)]
    }), ((0, import_react.useContext)(Vr).editorModeStatus === "layout" || (0, import_react.useContext)(Vr).editorModeStatus === "both") && N(p1, {
      children: [d(ka, {
        name: b0.style,
        children: e.style.getPropertyView()
      }), d(ka, {
        name: b0.labelStyle,
        children: e.labelStyle.getPropertyView()
      }), d(ka, {
        name: b0.inputFieldStyle,
        children: e.inputFieldStyle.getPropertyView()
      }), d(ka, {
        name: b0.animationStyle,
        hasTooltip: true,
        children: e.animationStyle.getPropertyView()
      })]
    })]
  })).build();
}();
$ = zte($, de);
var _e = N0($, TQe([et1, tt1, nt1, rt1, at1, ot1]));
var We = H0(_e, [HQe({
  name: "value",
  desc: _("export.inputValueDesc"),
  depKeys: ["value", "allowNull", "formatter"],
  func: (e) => qe(e.value, e.allowNull, e.formatter)
}), _Qe, LQe, HQe({
  name: "invalid",
  desc: _("export.invalidDesc"),
  depKeys: ["value", "required", "min", "max", "allowNull", "customRule"],
  func: (e) => O({
    ...e,
    value: {
      value: e.value
    }
  }).validateStatus !== ""
}), ...RQe]);

export {
  We
};
//# sourceMappingURL=chunk-SRYFJOU3.js.map
