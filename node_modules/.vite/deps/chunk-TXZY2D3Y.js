import {
  Ao,
  Eo,
  Ff,
  Ux,
  tu,
  ua
} from "./chunk-C4ZQG65I.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/16599e37.js
var import_react = __toESM(require_react(), 1);
var E = "cm-click-comp-name";
var S = Ao.mark({
  class: E
});
var p = Eo.define();
var a = tu.define({
  create() {
    return Ao.none;
  },
  update(t, c) {
    t = t.map(c.changes);
    const n = c.effects.filter((r) => r.is(p));
    return n.length > 0 ? n[0].value : t;
  },
  provide: (t) => ua.decorations.from(t)
});
function m(t, c) {
  if (!t || !c)
    return [];
  const n = [];
  let r = 0;
  return t.replace(/[a-zA-Z_$][\w$]*/g, (o) => {
    const e = t.indexOf(o, r);
    return e >= 0 && (c.hasOwnProperty(o) && (e === 0 || t[e - 1] !== ".") && n.push([e, e + o.length]), r = e + o.length), o;
  }), n;
}
function N(t, c, n) {
  if (!t || !n)
    return [];
  if (c === "Function")
    return m(t, n);
  const r = [];
  let o = 0;
  for (const e of Ux(t)) {
    if (Ff(e)) {
      const f = o + 2;
      m(e.slice(2, -2), n).forEach(([s, l]) => r.push([s + f, l + f]));
    }
    o += e.length;
  }
  return r;
}
function y(t, c, n, r) {
  (0, import_react.useEffect)(() => {
    if (!t || c !== t.state.doc.toString())
      return;
    const o = N(c, n, r).map(([f, s]) => S.range(f, s)), e = [p.of(Ao.set(o))];
    t.state.field(a, false) || e.push(Eo.appendConfig.of([a])), t.dispatch({
      effects: e
    });
  }, [t, c, n, r]);
}

export {
  E,
  y
};
//# sourceMappingURL=chunk-TXZY2D3Y.js.map
