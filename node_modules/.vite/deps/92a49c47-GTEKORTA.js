import {
  $0,
  I6e,
  IZ,
  N,
  P6e,
  Pke,
  Vxe,
  Wb,
  d,
  h2,
  iKn,
  il,
  t9,
  w0r
} from "./chunk-C4ZQG65I.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/92a49c47.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var D = IZ();
function j(p) {
  const {
    dsl: h,
    moduleDsl: m,
    appId: i,
    moduleInputs: o,
    onCompChange: n,
    onModuleEventTriggered: c
  } = p, a = (0, import_react.useRef)(c);
  a.current = c;
  const f = (0, import_react.useMemo)(
    () => ({
      Comp: I6e,
      initialValue: h,
      reduceContext: {
        readOnly: true,
        applicationId: i,
        parentApplicationPath: [],
        moduleDSL: m || {}
      },
      initHandler: (t) => t.preload(`app-${i}`),
      actionPreInterceptor: (t) => {
        var s;
        return t.type === h2.TRIGGER_MODULE_EVENT ? ((s = a.current) == null || s.call(a, t.name), false) : true;
      }
    }),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    [i]
  ), [e] = P6e(f);
  return (0, import_react.useEffect)(() => {
    n == null || n(e);
  }, [e]), (0, import_react.useEffect)(() => {
    const t = e == null ? void 0 : e.children.ui.getModuleLayoutComp();
    if (!t || !o)
      return;
    t.children.io.children.inputs.getView().forEach((d2) => {
      const {
        name: y
      } = d2.getView(), l = o[y];
      l !== void 0 && d2.children.defaultValue.children.comp.dispatch(il(d2.children.defaultValue.children.comp.changeValueAction(l)));
    });
  }, [o]), N(Pke, {
    children: [d(w0r, {}), d(Vxe, {
      store: iKn,
      children: d($0.Provider, {
        value: {
          applicationId: i,
          appType: 1,
          readOnly: true,
          hideHeader: true
        },
        children: d(t9, {
          history: D,
          children: d(Wb, {
            path: "/",
            render: () => e == null ? void 0 : e.getView()
          })
        })
      })
    })]
  });
}
export {
  j as AppView
};
//# sourceMappingURL=92a49c47-GTEKORTA.js.map
