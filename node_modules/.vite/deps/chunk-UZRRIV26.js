import {
  Ht
} from "./chunk-LO3KA2SO.js";
import {
  C
} from "./chunk-OK47LCRW.js";
import {
  y
} from "./chunk-OQKE4CKD.js";
import {
  P
} from "./chunk-6GCGVRH5.js";
import {
  FL,
  Fj1,
  H0,
  HQe,
  LC,
  M2,
  N0,
  NQe,
  Oc,
  Qn,
  S0,
  VS,
  ZDe,
  ZW1,
  Zh,
  _,
  ao,
  d,
  d3,
  fe1,
  gM,
  h1,
  h2,
  hc,
  kte,
  le1,
  mC,
  nc,
  p1,
  s2e,
  t2,
  tg,
  v6e,
  vQe,
  vc,
  wXe
} from "./chunk-C4ZQG65I.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/62fe8227.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var ie = {
  noOfRows: wXe(vQe),
  // FIXME: migrate "noOfRows" to "data"
  noOfColumns: t2(vc, 1),
  itemIndexName: t2(M2, "i"),
  itemDataName: t2(M2, "currentItem"),
  dynamicHeight: gM,
  heightUnitOfRow: t2(vc, 1),
  container: C,
  autoHeight: gM,
  horizontalGridCells: v6e,
  scrollbars: t2(ao, false),
  showBorder: ao,
  pagination: t2(P, {
    pageSize: "6"
  }),
  style: nc(ZW1, "style"),
  animationStyle: nc(Fj1, "animationStyle"),
  horizontal: t2(ao, false),
  minHorizontalWidth: t2(FL, "100px")
};
var oe = new VS(ie, () => d(p1, {})).setPropertyViewFn(() => d(p1, {})).build();
var ae = class extends oe {
  getOriginalContainer() {
    return this.children.container.getSelectedComp().getComp();
  }
  realSimpleContainer(e) {
    return this.getOriginalContainer().realSimpleContainer(e);
  }
  getCompTree() {
    return this.getOriginalContainer().getCompTree();
  }
  findContainer(e) {
    return this.getOriginalContainer().findContainer(e);
  }
  getPasteValue(e) {
    return {
      ...this.toJsonValue(),
      container: this.getOriginalContainer().getPasteValue(e)
    };
  }
  autoHeight() {
    return this.children.autoHeight.getView();
  }
  reduce(e) {
    let n = tg({
      inEventContext: true
    }, () => super.reduce(e));
    if (e.type === h2.UPDATE_NODES_V2) {
      const {
        itemCount: l
      } = fe1(n.children.noOfRows.getView()), r = n.children.pagination.getView(), c = r.total || l, s = (r.current - 1) * r.pageSize;
      s >= c && r.current > 1 ? setTimeout(() => n.children.pagination.children.pageNo.dispatchChangeValueAction(1)) : String(s) !== this.children.container.getSelection() && setTimeout(() => n.children.container.dispatch(C.setSelectionAction(String(s))));
    }
    return n;
  }
  /** expose the data from inner comps */
  itemsNode() {
    const {
      itemCount: e
    } = fe1(this.children.noOfRows.getView()), n = this.children.itemIndexName.getView(), l = this.children.itemDataName.getView(), r = this.children.noOfRows.exposingNode(), c = this.children.container, s = h1(h1.range(0, e)).toPairs().fromPairs().mapValues((o) => {
      let m = c.getCachedComp(String(o)) ?? c.getOriginalComp();
      const I = Zh(m.getComp().getCompTree()), w = h1(I).mapKeys((i) => i.children.name.getView()).mapValues((i) => i.children.comp.exposingNode()).value(), L = {
        [n]: mC(o),
        [l]: hc(r, (i) => typeof i == "number" ? {} : i[o])
      }, b = new ZDe(d3(w), L);
      return S0(this, "exposing_row_" + o, [b, r, w, n, l], (i, C2) => i[1] === C2[1] && kte(i.slice(2), C2.slice(2), 3))[0];
    }).value(), R = hc(d3(s), (o) => h1.range(0, e).map((m) => o[m]));
    return S0(this, "exposing_data", [R, s], (o, m) => LC(o[1], m[1]))[0];
  }
};
var re = Oc(ae, (t) => d(Ht, {
  comp: t
}));
var se = y("listView");
var u = Qn(re, (t) => d(se, {
  comp: t
}));
u = H0(u, [
  new NQe("items", (t) => ({
    data: t.itemsNode()
  }), (t) => t.data, _("listView.itemsDesc")),
  HQe({
    name: "data",
    desc: _("listView.dataDesc"),
    depKeys: ["noOfRows"],
    func: (t) => {
      const {
        data: e
      } = fe1(t.noOfRows);
      return e;
    }
  }),
  new NQe("pageNo", (t) => ({
    index: t.children.pagination.children.pageNo.exposingNode()
  }), (t) => t.index, "Page Number"),
  s2e
]);
var we = N0(u, [{
  method: {
    name: "setPage",
    description: "",
    params: [{
      name: "page",
      type: "number"
    }]
  },
  execute: (t, e) => {
    const n = e[0];
    n && n > 0 && t.children.pagination.children.pageNo.dispatchChangeValueAction(n);
  }
}]);
function Ce(t, e) {
  return {
    noOfRows: `[
  {
    "rate": "9.2",
    "title": "The Shawshank Redemption",
    "url": "https://www.imdb.com/title/tt0111161/",
    "cover": "https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_UY67_CR0,0,45,67_AL_.jpg"
  },
  {
    "rate": "9.2",
    "title": "The Godfather",
    "url": "https://www.imdb.com/title/tt0068646/",
    "cover": "https://m.media-amazon.com/images/M/MV5BM2MyNjYxNmUtYTAwNi00MTYxLWJmNWYtYzZlODY3ZTk3OTFlXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_UY67_CR1,0,45,67_AL_.jpg"
  },
  {
    "rate": "9.0",
    "title": "The Dark Knight",
    "url": "https://www.imdb.com/title/tt0468569/",
    "cover": "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_UY67_CR0,0,45,67_AL_.jpg"
  }
]`,
    container: le1([{
      item: {
        compType: "image",
        name: e.genItemName("image"),
        comp: {
          src: "{{currentItem.cover}}",
          autoHeight: "fixed"
        }
      },
      layoutItem: {
        i: "",
        w: 6,
        h: 14,
        x: 0,
        y: 0
      }
    }, {
      item: {
        compType: "link",
        name: e.genItemName("link"),
        comp: {
          text: "{{i+1}}. {{currentItem.title}}",
          onEvent: [{
            name: "click",
            handler: {
              compType: "goToURL",
              comp: {
                url: "{{currentItem.url}}",
                inNewTab: true
              },
              condition: "",
              slowdown: "debounce",
              delay: ""
            }
          }]
        }
      },
      layoutItem: {
        i: "",
        h: 5,
        w: 17,
        x: 7,
        y: 0
      }
    }, {
      item: {
        compType: "rating",
        name: e.genItemName("rating"),
        comp: {
          defaultValue: "{{currentItem.rate / 2}}",
          max: "5",
          label: {
            text: "",
            width: "33",
            widthUnit: "%",
            position: "row",
            align: "right"
          },
          allowHalf: true,
          disabled: true
        }
      },
      layoutItem: {
        i: "",
        h: 5,
        w: 17,
        x: 7,
        y: 9
      }
    }])
  };
}

export {
  ae,
  we,
  Ce
};
//# sourceMappingURL=chunk-UZRRIV26.js.map
