import {
  c,
  h
} from "./chunk-5NYYS2XH.js";
import {
  N
} from "./chunk-YTIIQKGY.js";
import {
  $j1,
  E7,
  Fp2,
  Fs,
  GK1,
  Gse,
  H0,
  M2,
  N as N2,
  N11,
  VS,
  Vr,
  _,
  aU1,
  ao,
  b0,
  d,
  de,
  hW1,
  hWe,
  hl,
  ho,
  ka,
  nc,
  p1,
  qse,
  s2e,
  t2,
  uW1,
  vo,
  z3
} from "./chunk-C4ZQG65I.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/lowcoder-sdk/dist/c2f0a2ba.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var Y = de.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  border: ${(e) => e.$style.borderWidth ? e.$style.borderWidth : "1px"} solid ${(e) => e.$style.border};
  border-radius: ${(e) => e.$style.radius};
  overflow: hidden;
  width: 100%;
  height: 100%;
  width: ${(e) => qse(e.$style.margin)};	
  height: ${(e) => Gse(e.$style.margin)};	
  margin: ${(e) => e.$style.margin};	
  padding: ${(e) => e.$style.padding};
  .signature {
    background-color: ${(e) => e.$style.background};
    opacity: ${(e) => e.$isEmpty ? 0 : 1};
    width: 100%;
    height: 100%;
  }

  .sigCanvas {
    flex-grow: 1;
  }
  .footer {
    position: absolute;
    bottom: 0;
    right: 0;
    padding-right: 8px;
    > span {
      margin: 0 8px 16px 8px;
      cursor: pointer;
      svg {
        color: ${(e) => e.$style.footerIcon};
        width: 14px;
        height: 14px;
        path {
          fill: ${(e) => e.$style.footerIcon};
        }
      }
      &:hover svg {
        color: ${(e) => $j1(e.$style.footerIcon)};
        path {
          fill: ${(e) => $j1(e.$style.footerIcon)};
        }
      }
    }
  }
  .empty {
    position: absolute;
    height: 100%;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: ${(e) => e.$style.background};
    z-index: -1;
    color: ${(e) => e.$style.tips};
  }
`;
var q = {
  tips: t2(M2, _("signature.signHere")),
  onEvent: N11,
  label: t2(GK1, {
    position: "column",
    text: ""
  }),
  style: nc(hW1, "style"),
  labelStyle: nc(uW1, "labelStyle"),
  showUndo: t2(ao, true),
  showClear: t2(ao, true),
  value: z3(""),
  inputFieldStyle: nc(aU1, "inputFieldStyle"),
  ...c
};
var J = import_react.default.lazy(() => import("./3072ddca-XSOCO4UX.js").then((e) => e.i));
var y = function() {
  return new VS(q, (e, $) => {
    let t = null;
    const [m, p] = (0, import_react.useState)(false), [f, v] = (0, import_react.useState)([0, 0]), d2 = (a = false) => {
      const o = a || (t == null ? void 0 : t.toData().length) === 0;
      t && (o && (t == null || t.clear()), $(hl({
        value: ho(o ? "" : t.toDataURL(), false)
      })));
    };
    return e.label({
      style: e.style,
      labelStyle: e.labelStyle,
      inputFieldStyle: e.inputFieldStyle,
      children: d(hWe, {
        onResize: (a, o) => {
          a && o && v([a, o]), d2(true);
        },
        children: N2(Y, {
          onMouseDown: (a) => {
            a.preventDefault();
          },
          $style: e.inputFieldStyle,
          $isEmpty: !e.value && !m,
          children: [d("div", {
            className: "signature",
            children: d(import_react.Suspense, {
              fallback: d(Fs, {}),
              children: d(J, {
                ref: (a) => {
                  t = a;
                },
                penColor: e.inputFieldStyle.pen,
                clearOnResize: false,
                canvasProps: {
                  className: "sigCanvas",
                  width: f[0],
                  height: f[1]
                },
                onEnd: () => {
                  d2(), p(false), e.onEvent("change");
                },
                onBegin: () => p(true)
              })
            })
          }), (e.showClear || e.showUndo) && N2("div", {
            className: "footer",
            children: [e.showUndo && d("span", {
              className: "anticon",
              children: d(Fp2, {
                onClick: () => {
                  const a = t == null ? void 0 : t.toData();
                  a && (a == null || a.pop(), t == null || t.fromData(a), d2(), e.onEvent("change"));
                }
              })
            }), e.showClear && d(N, {
              onClick: () => {
                d2(true), e.onEvent("change");
              }
            })]
          }), !(m || e.value) && d("div", {
            className: "empty",
            children: e.tips
          })]
        })
      })
    });
  }).setPropertyViewFn((e) => N2(p1, {
    children: [d(ka, {
      name: b0.basic,
      children: e.tips.propertyView({
        label: _("signature.tips")
      })
    }), d(h, {
      ...e
    }), ["logic", "both"].includes((0, import_react.useContext)(Vr).editorModeStatus) && N2(ka, {
      name: b0.interaction,
      children: [e.onEvent.getPropertyView(), E7(e), e.showUndo.propertyView({
        label: _("signature.showUndo")
      }), e.showClear.propertyView({
        label: _("signature.showClear")
      })]
    }), ["layout", "both"].includes((0, import_react.useContext)(Vr).editorModeStatus) && e.label.getPropertyView(), ["layout", "both"].includes((0, import_react.useContext)(Vr).editorModeStatus) && N2(p1, {
      children: [d(ka, {
        name: b0.style,
        children: e.style.getPropertyView()
      }), d(ka, {
        name: b0.labelStyle,
        children: e.labelStyle.getPropertyView()
      }), d(ka, {
        name: b0.inputFieldStyle,
        children: e.inputFieldStyle.getPropertyView()
      })]
    })]
  })).build();
}();
y = class extends y {
  autoHeight() {
    return false;
  }
};
var le = H0(y, [new vo("value", _("value")), s2e]);

export {
  le
};
//# sourceMappingURL=chunk-S6RHOSBF.js.map
